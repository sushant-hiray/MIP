function y = mrf_quad(A)

%A is Noisy Image
%beta is regularity factor

u = circshift(A,[-1,0]);
d = circshift(A,[1,0]);
l = circshift(A,[0,-1]);
r = circshift(A,[0,1]);

u1=2*abs((A-u)).sign(A-u);
d1=2*abs((A-d)).sign(A-d);
l1=2abs((A-l)).sign(A-l);
r1=abs((A-r)).sign(A-r);
y = (u1+l1+r1+d1).*2;
